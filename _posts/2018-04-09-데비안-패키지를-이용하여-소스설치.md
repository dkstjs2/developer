#How to install Nginx on Ubuntu 16.04

오늘은 데비안 패키지를 이용하여 개발 소프트웨어를 소스설치하는 방법에 대해 알아보겠습니다.

설치 대상은 Nginx입니다.
<br>
Nginx 저장소 추가
`apt-add-repository ppa:nginx/stable`
<br>
Nginx 소스 다운 활성화
`vi /etc/apt/sources.list.d/nginx-ubuntu-stable-xenial.list`
`deb-src http://ppa.launchpad.net/nginx/stable/ubuntu xenial main` 주석해제
<br>
Nginx 소스 다운로드
`cd ......./nginx/ && apt source nginx`
<br>
필요한 모듈을 추가 설치하기 위해 Nginx 풀버전을 다운받는다.
<https://www.ubuntuupdates.org/package_metas?exact_match=1&q=nginx-full/>
<br>
에제는 1.12.2버전을 사용하므로
`wget http://ppa.launchpad.net/nginx/stable/ubuntu/pool/main/n/nginx/nginx-full_1.12.2-0+xenial0_amd64.deb`
<br>
확인
`ls`
`nginx-1.12.2  nginx-full_1.12.2-0+xenial0_amd64.deb  nginx_1.12.2-0+xenial0.debian.tar.xz  nginx_1.12.2-0+xenial0.dsc  nginx_1.12.2.orig.tar.gz`
<br>
컴파일 옵션에 모듈 추가. 다운받는 버전은 full버전이므로 full_configure_flags 항목에 모듈을 추가해준다.
`vi debian/rules`
`common_configure_flags := \`
            `--with-cc-opt="$(debian_cflags)" \`
            `--with-ld-opt="$(debian_ldflags)" \`
            `--prefix=/usr/share/nginx \`
            `.......`
            `--add-module=/module/path/module-name`
<br>
저장 후 데비안 패키지 빌드
`dpkg-buildpackage -b`
![Alt text](../images/haetal.jpg)
오랜 시간 경과 끝에.. 빌드가 끝나면

`cd .. && dpkg --install nginx-full_1.12.2-0+xenial0_amd64.deb`
<br>
설치 확인
`service nginx status`
<p>● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since 월 2018-04-09 20:41:27 KST; 46min ago ...</p>
